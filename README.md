# 附近寻厕 - 微信小程序

一个帮助用户查找附近厕所的微信小程序，使用腾讯地图API实现定位和搜索功能。

## 功能特性

- ✅ 获取用户定位授权
- ✅ 自动搜索附近厕所（公共厕所、商场厕所等）
- ✅ 显示厕所位置、距离、评分和评论
- ✅ 按距离由近到远排序
- ✅ 切换下一个厕所功能
- ✅ 一键导航到腾讯地图

## 项目结构

```
附近寻厕/
├── app.json              # 小程序配置文件
├── app.js                # 小程序逻辑
├── app.wxss              # 全局样式
├── project.config.json   # 项目配置
├── sitemap.json          # 站点地图配置
├── pages/
│   └── index/            # 主页面
│       ├── index.wxml    # 页面结构
│       ├── index.wxss    # 页面样式
│       ├── index.js      # 页面逻辑
│       └── index.json    # 页面配置
└── README.md             # 项目说明
```

## 配置说明

### 1. 腾讯地图API Key配置

在 `pages/index/index.js` 文件中，找到以下代码：

```javascript
const key = 'YOUR_TENCENT_MAP_KEY' // 需要替换为实际的腾讯地图key
```

替换 `YOUR_TENCENT_MAP_KEY` 为你在腾讯位置服务申请的API Key。

**获取腾讯地图Key的步骤：**
1. 访问 [腾讯位置服务控制台](https://lbs.qq.com/)
2. 注册/登录账号
3. 创建应用，获取Key
4. 在小程序后台配置request合法域名：`https://apis.map.qq.com`

### 2. 小程序AppID配置

在 `project.config.json` 文件中，将 `appid` 替换为你的小程序AppID：

```json
"appid": "your-appid-here"
```

### 3. 地图标记图标（可选）

如果需要自定义地图标记图标，请：
1. 创建 `images` 目录
2. 添加 `toilet-marker.png` 图标文件（建议尺寸：40x40px）
3. 或者修改 `index.js` 中的图标路径

## 使用说明

### 开发环境

1. 使用微信开发者工具打开项目
2. 配置好AppID和腾讯地图Key
3. 在微信开发者工具中预览

### 功能说明

1. **首次进入**：小程序会自动请求定位权限，获取用户位置后搜索附近厕所
2. **显示信息**：显示最近的厕所信息，包括名称、地址、距离、评分和评论
3. **切换厕所**：点击"下一个厕所"按钮，按距离由近到远顺序切换
4. **导航功能**：点击"导航"按钮，跳转到腾讯地图进行导航

## 注意事项

1. **定位权限**：小程序需要用户授权定位权限才能正常使用
2. **网络请求**：需要在微信公众平台配置request合法域名
3. **腾讯地图小程序**：导航功能需要跳转到腾讯地图小程序（appid: wx5bc2ac602a747594）
4. **API限制**：腾讯地图API有调用次数限制，请根据实际情况选择合适的套餐

## 开发建议

- 如果腾讯地图API不可用，代码会自动使用模拟数据进行测试
- 可以根据实际需求调整搜索范围（当前设置为2公里）
- 可以扩展更多功能，如收藏、分享等

## 许可证

MIT License

